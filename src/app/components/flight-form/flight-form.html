<div class="flight-form-container">
  <app-navbar [showLoginButton]="false" [showUserInfo]="true"></app-navbar>

  <div class="background-elements">
    <div class="floating-plane">âœˆï¸</div>
    <div class="cloud cloud-1">â˜ï¸</div>
    <div class="cloud cloud-2">â˜ï¸</div>
    <div class="cloud cloud-3">â˜ï¸</div>
  </div>

  <div class="form-card">
    <div class="form-header">
      <div class="header-icon">ğŸ›«</div>
      <h2 class="form-title">Flight Information Form</h2>
      <p class="form-subtitle">Complete your flight details with precision</p>
    </div>

    <!-- OCR Scanner Section -->

    <div class="ocr-section">
      <div class="ocr-header">
        <div class="ocr-title">
          <span class="ai-icon">ğŸ¤–</span>
          <h3>AI-Powered Boarding Pass Scanner</h3>
        </div>
        <p>Upload your boarding pass and let OpenAI Vision extract flight details automatically!</p>
      </div>

      <div class="ocr-upload-area" [class.has-image]="imagePreview">
        <div class="upload-zone" *ngIf="!imagePreview">
          <input 
            type="file" 
            (change)="onFileSelected($event)" 
            accept="image/*" 
            id="boarding-pass-upload"
            class="file-input">
          <label for="boarding-pass-upload" class="upload-label">
            <div class="upload-content">
              <div class="upload-icon">ğŸ“±</div>
              <div class="upload-text">
                <span class="upload-title">Upload Boarding Pass</span>
                <span class="upload-subtitle">Support JPG, PNG formats</span>
              </div>
            </div>
          </label>
        </div>

        <div class="image-preview" *ngIf="imagePreview">
          <img [src]="imagePreview" alt="Boarding pass preview" class="preview-image">
          <div class="preview-actions">
            <button 
              type="button" 
              (click)="processOCR()" 
              [disabled]="isProcessingOCR"
              class="btn btn-ai">
              <span *ngIf="!isProcessingOCR">ğŸ” Extract Data</span>
              <span *ngIf="isProcessingOCR">ğŸ¤– Processing...</span>
            </button>
            <button 
              type="button" 
              (click)="clearOCR()" 
              class="btn btn-secondary">
              âŒ Clear
            </button>
          </div>
        </div>
      </div>

      <div class="ocr-status" *ngIf="ocrMessage">
        <div class="status-message" [class.success]="isOCRSuccess" [class.error]="!isOCRSuccess">
          {{ ocrMessage }}
        </div>
      </div>

      <div class="ocr-divider">
        <span>OR fill manually below</span>
      </div>
    </div>
    
    <form [formGroup]="flightForm" (ngSubmit)="onSubmit()" class="modern-form">
      
      <!-- Row 1: Airline and Flight Number -->
      <div class="form-row">
        <div class="form-group">
          <label for="airline" class="form-label">
            <span class="label-icon">ğŸ¢</span>
            Airline <span class="required">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              id="airline"
              type="text" 
              formControlName="airline" 
              class="form-control"
              [class.error]="isFieldInvalid('airline')"
              placeholder="e.g., Emirates, Delta, British Airways">
            <div class="input-focus-line"></div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('airline')">
            {{ getFieldError('airline') }}
          </div>
        </div>

        <div class="form-group">
          <label for="flightNumber" class="form-label">
            <span class="label-icon">ğŸ«</span>
            Flight Number <span class="required">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              id="flightNumber"
              type="text" 
              formControlName="flightNumber" 
              class="form-control"
              [class.error]="isFieldInvalid('flightNumber')"
              placeholder="e.g., EK123, DL456">
            <div class="input-focus-line"></div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('flightNumber')">
            {{ getFieldError('flightNumber') }}
          </div>
        </div>
      </div>

      <!-- Row 2: Date and Time -->
      <div class="form-row">
        <div class="form-group">
          <label for="arrivalDate" class="form-label">
            <span class="label-icon">ğŸ“…</span>
            Arrival Date <span class="required">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              id="arrivalDate"
              type="date" 
              formControlName="arrivalDate" 
              class="form-control"
              [class.error]="isFieldInvalid('arrivalDate')">
            <div class="input-focus-line"></div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('arrivalDate')">
            {{ getFieldError('arrivalDate') }}
          </div>
        </div>

        <div class="form-group">
          <label for="arrivalTime" class="form-label">
            <span class="label-icon">ğŸ•’</span>
            Arrival Time <span class="required">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              id="arrivalTime"
              type="time" 
              formControlName="arrivalTime" 
              class="form-control"
              [class.error]="isFieldInvalid('arrivalTime')">
            <div class="input-focus-line"></div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('arrivalTime')">
            {{ getFieldError('arrivalTime') }}
          </div>
        </div>
      </div>

      <!-- Row 3: Guests -->
      <div class="form-row">
        <div class="form-group full-width">
          <label for="numOfGuests" class="form-label">
            <span class="label-icon">ğŸ‘¥</span>
            Number of Guests <span class="required">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              id="numOfGuests"
              type="number" 
              formControlName="numOfGuests" 
              class="form-control"
              [class.error]="isFieldInvalid('numOfGuests')"
              min="1"
              step="1"
              placeholder="Enter number of guests">
            <div class="input-focus-line"></div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('numOfGuests')">
            {{ getFieldError('numOfGuests') }}
          </div>
        </div>
      </div>

      <!-- Row 4: Comments -->
      <div class="form-row">
        <div class="form-group full-width">
          <label for="comments" class="form-label">
            <span class="label-icon">ğŸ’¬</span>
            Additional Comments
          </label>
          <div class="input-wrapper">
            <textarea 
              id="comments"
              formControlName="comments" 
              class="form-control textarea"
              rows="4"
              placeholder="Any special requirements, dietary restrictions, or additional information...">
            </textarea>
            <div class="input-focus-line"></div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="submit-section">
        <button 
          type="submit" 
          class="submit-btn"
          [disabled]="isSubmitting"
          [class.loading]="isSubmitting">
          
          <div class="btn-content">
            <span class="btn-icon" *ngIf="!isSubmitting">ğŸš€</span>
            <div class="loading-spinner" *ngIf="isSubmitting">
              <div class="spinner"></div>
            </div>
            <span class="btn-text">
              {{ isSubmitting ? 'Processing Flight Info...' : 'Submit Flight Information' }}
            </span>
          </div>
          
          <div class="btn-ripple"></div>
        </button>
      </div>
    </form>

    <div *ngIf="responseMessage" 
     class="response-message" 
     [ngClass]="{'success': isSuccess, 'error': !isSuccess}">
  
  <!-- Success Message with Action Button -->
  <div *ngIf="isSuccess" class="success-content">
    <div class="success-icon">âœ…</div>
    <div class="success-text">
      <h3>Success!</h3>
      <p>{{responseMessage}}</p>
    </div>
    <button class="view-flights-btn" (click)="navigateToMyFlights()">
      <span class="btn-icon">ğŸ“‹</span>
      View My Flights
    </button>
  </div>
  
  <!-- Error Message (keep existing) -->
  <div *ngIf="!isSuccess" class="error-content">
    <div class="error-icon">âŒ</div>
    <p>{{responseMessage}}</p>
  </div>
</div>

  </div>
</div>